
<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>clarete &mdash; Home</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/media/css/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
    <link rel="icon" type="image/png" href="/media/img/8bitme.png">
    <link rel="alternate" type="application/rss+xml" href="/blog/rss.xml">
  </head>
  <body>
    
      <div class="social">
        <div class="container">
          <ul class="badges">
            <li>
              <a href="mailto:lincoln@clarete.li" alt="Email">
                <span class="fa fa-envelope-o"></span>EMail
              </a>
            </li>
            <li>
              <a href="https://github.com/clarete" target="_blank" alt="Github">
                <span class="fa fa-github-alt"></span>Github
              </a>
            </li>
            <li>
              <a href="/blog/rss.xml" alt="RSS">
                <span class="fa fa-rss"></span>RSS
              </a>
            </li>
          </ul>

          <a href="/">
            <img class="avatar" type="image/svg+xml" src="/media/img/8bitme.svg" alt="Me in 8bit" />
          </a>

          <div class="balloon">
            Happy Hacking!
          </div>

        </div>
      </div>
    

    <div class="post">
      <div class="container">
        
  <!-- starting-a-blog -->
  
  <div class="title">
    <h1>Starting a blog</h1>
    <span class="pubdate">Apr 26, 2020</span>
  </div>

  
  <div class="content">
    <p>
I've tried blogging before. All the attempts ended up following a very
similar pattern: Took me a veeeery long time to write a single post
and after that I never looked back at it again.
</p>

<p>
This time I'm trying things differently. I'm not going to start from
the perfect blog post. I'll start just documenting how I turned this
GitHub Pages repository in a blog and see what comes next.
</p>

<div id="outline-container-org47ddf42" class="outline-2">
<h2 id="org47ddf42">First things first</h2>
<div class="outline-text-2" id="text-org47ddf42">
<p>
I already have a GitHub pages website setup. It's as simple as
creating a repository called <code>YOURGITHUBUSER.github.io</code> (you can see
mine <a href="https://github.com/clarete/clarete.github.io/">here</a>). After that, you can push static HTML content and it will
be available under <code>https://YOURGITHUBUSER.github.io</code>.
</p>

<p>
I also configured my DNS provider to point my domain <code>clarete.li</code> to
GitHub and created a <code>CNAME</code> file containing the domain name.
</p>

<p>
If you've never done that before, I highly recommend visiting the
GitHub Pages documentation. Specifically the articles for <a href="https://help.github.com/en/github/working-with-github-pages">creating a
new website</a> and <a href="https://help.github.com/en/github/working-with-github-pages/configuring-a-custom-domain-for-your-github-pages-site">configuring a custom domain</a> for your new website.
</p>
</div>
</div>

<div id="outline-container-org9364639" class="outline-2">
<h2 id="org9364639">The home page</h2>
<div class="outline-text-2" id="text-org9364639">
<p>
My lil website is as simple as it can get. My amazing <a href="https://www.instagram.com/pinkandsalt/">fiance</a> got me
the logo you see on the top bar and I took care of putting it on a
proper pink background for the internet enjoyment.
</p>

<p>
The index file is just HTML and CSS, nothing else. Even the list of
recent posts is done manually.
</p>
</div>
</div>

<div id="outline-container-org9ae92f7" class="outline-2">
<h2 id="org9ae92f7">The Posts</h2>
<div class="outline-text-2" id="text-org9ae92f7">
<p>
This very post is written as an Org-Mode file. For those who haven't
heard of Org-Mode before, checkout <a href="https://orgmode.org/">their website</a>.  Long story short,
Org-Mode is a text-based document format.  From that perspective, it
could be compared with <code>Markdown</code>. The difference is the ginormous
feature set that Org-Mode supports compared.  Including, but not
limited to, many output formats and an incredible interactive
experience. 
</p>

<p>
HTML is one of the output formats that Org-Mode supports. Each post
written in an <code>.org</code> file will be translated into an HTML page.
This feature is built into Org-Mode. It just takes a bit of
configuration.
</p>
</div>
</div>

<div id="outline-container-org99cddfc" class="outline-2">
<h2 id="org99cddfc">Org-Mode Publishing</h2>
<div class="outline-text-2" id="text-org99cddfc">
<p>
Being completely honest, the HTML publishing feature doesn't seem
exactly designed for the blogging use case. It took quite a bit of
tweaking of the configuration to get it to do all the things that I
wanted.
</p>

<p>
You can read the entirety of my configuration in the file that I
submitted to git as part of this website: <a href="https://github.com/clarete/clarete.github.io/blob/master/publish">publish</a>. But there is one
little part that I consider worth mentioning: Setting the variable
<code>org-publish-project-alist</code>.
</p>

<p>
Although a single document can be exported to HTML, in order to
apply the same configuration to various files, I was required to
create a project with a source directory and an output directory.
</p>

<p>
The cool thing about this project thing was that I could have
different groups of settings and aggregate them all under a single
project.  The commented snippet bellow will shad some light in the
most essential parts of the configuration:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-publish-project-alist
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Here's the project definition with other 3 components</span>
  `<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"blog"</span> <span class="org-builtin">:components</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"blog-posts"</span> <span class="org-string">"blog-static"</span> <span class="org-string">"blog-rss"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">This is the component that translates the .org files into</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">the .html ones. There are lots of things happening here</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"blog-posts"</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Where your org files are coming from</span>
     <span class="org-builtin">:base-directory</span> ,base-dir
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Where your HTML files will be generated</span>
     <span class="org-builtin">:publishing-directory</span> ,pub-dir
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Customize the Org file tree before it's translated into</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">HTML. I needed to override this function to hook up</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">inserting the date of the post into the subtitle.</span>
     <span class="org-builtin">:publishing-function</span> local-blog-publish
     <span class="org-comment-delimiter">;; </span><span class="org-comment">Some configuration of what is going to be auto-generated</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">and what won't</span>
     <span class="org-builtin">:auto-sitemap</span> t
     <span class="org-builtin">:auto-preamble</span> t
     <span class="org-builtin">:section-numbers</span> nil
     <span class="org-builtin">:table-of-contents</span> nil
     <span class="org-builtin">:html-head-include-default-style</span> nil
     <span class="org-comment-delimiter">;; </span><span class="org-comment">These allowed me to inject my own HTML for the header and</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">the footer. I'm in fact reading these two snippets from</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">separate files</span>
     <span class="org-builtin">:html-preamble</span> local-blog-preamble
     <span class="org-builtin">:html-postamble</span> local-blog-postamble<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Tis is actually straight forward. It will take care of the</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">asset files included in the blog posts</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"blog-static"</span>
     <span class="org-builtin">:base-directory</span> ,base-dir
     <span class="org-builtin">:publishing-directory</span> ,pub-dir
     <span class="org-builtin">:base-extension</span> <span class="org-string">"css</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">js</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">png</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">jpg</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">gif</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">pdf"</span>
     <span class="org-builtin">:recursive</span> t
     <span class="org-builtin">:publishing-function</span> org-publish-attachment<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">Also straightforward, but needed to install an extension</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">ox-rss</span></span><span class="org-comment">' that wasn't available via package manager. This little</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">snippet will be responsible for generating the `</span><span class="org-comment"><span class="org-constant">rss.xml</span></span><span class="org-comment">'</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">file.</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"blog-rss"</span>
     <span class="org-builtin">:base-directory</span> ,base-dir
     <span class="org-builtin">:publishing-directory</span> ,pub-dir
     <span class="org-builtin">:publishing-function</span> <span class="org-rainbow-delimiters-depth-4">(</span>org-rss-publish-to-rss<span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
     <span class="org-builtin">:rss-extension</span> <span class="org-string">"xml"</span>
     <span class="org-builtin">:html-link-home</span> <span class="org-string">"https://clarete.li/"</span>
     <span class="org-builtin">:html-link-use-abs-url</span> t
     <span class="org-builtin">:include</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"rss.org"</span><span class="org-rainbow-delimiters-depth-4">)</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">This is what generates the file `</span><span class="org-comment"><span class="org-constant">rss.org</span></span><span class="org-comment">', which in turn is</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">what's used to generate `</span><span class="org-comment"><span class="org-constant">rss.xml</span></span><span class="org-comment">'. The trickiest part for sure</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">was stitching together the custom functions starting with</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-comment"><span class="org-constant">local-blog-</span></span><span class="org-comment">'. The references I linked in the last paragraph</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">can be of great help if my `</span><span class="org-comment"><span class="org-constant">publish</span></span><span class="org-comment">' file isn't enough for</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">you.</span>
     <span class="org-builtin">:auto-sitemap</span> t
     <span class="org-builtin">:sitemap-filename</span> <span class="org-string">"rss.org"</span>
     <span class="org-builtin">:sitemap-title</span> <span class="org-string">"Lincoln Clarete"</span>
     <span class="org-builtin">:sitemap-style</span> list
     <span class="org-builtin">:sitemap-sort-files</span> anti-chronologically
     <span class="org-builtin">:sitemap-format-entry</span> local-blog-sitemap-format-entry
     <span class="org-builtin">:sitemap-function</span> local-blog-sitemap-function
     <span class="org-builtin">:publishing-function</span> local-blog-rss-publish-to-rss<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1d41e82" class="outline-2">
<h2 id="org1d41e82">Operating the blog</h2>
<div class="outline-text-2" id="text-org1d41e82">
<p>
From now one, I just have to execute the command <code>C-c C-e P p</code> to
ask Org Publishing to generate the HTML file of all the org files that
have been updated since I last executed it. It feels quite
convenient, I have to say.
</p>

<p>
After changing stuff and regenerating the HTML, the last step in my
publication journey is to add the changes to Git and push the
changes to GitHub. Then it just takes a minute or two for GitHub
Pages to pick up the changes and display it properly.
</p>
</div>
</div>

<div id="outline-container-org09f64ff" class="outline-2">
<h2 id="org09f64ff">Open issues</h2>
<div class="outline-text-2" id="text-org09f64ff">
<p>
I'm very happy with the current setup and there really aren't that
many issues so far. But there are two that I want to tackle:
</p>

<ol class="org-ol">
<li>I haven't added the unfurling links as suggested by <a href="https://writepermission.com/org-blogging-unfurling-links.html">rw-r-r</a>;</li>
<li>Still need to decide if I'll use Google Analytics or another less
intrusive alternative;</li>
<li>Source code snippets don't get syntax highlight if I the script
<code>publish</code> directly from the terminal. It errors out with the
following message: <code>Cannot fontify source block (htmlize.el &gt;=
     1.34 required)</code>. Which is quite weird because I have <code>htmlize
     1.57</code> installed.  I'm OK not fixing it for now because I can just
do it from within emacs and that's actually more convenient.</li>
</ol>
</div>
</div>

<div id="outline-container-org0ba9ae1" class="outline-2">
<h2 id="org0ba9ae1">Final thoughts</h2>
<div class="outline-text-2" id="text-org0ba9ae1">
<p>
The fine grained customizations were certaingly the hardest to get
to work and I wouldn't have been able to figure it out in the amount
of time I had to dedicate to this task without the amazing reference
other Emacs users put together. Here's what I consulted in no
particular order:
</p>

<ul class="org-ul">
<li><a href="https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html">https://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html</a></li>
<li><a href="https://www.brautaset.org/articles/2017/blogging-with-org-mode.html">https://www.brautaset.org/articles/2017/blogging-with-org-mode.html</a></li>
<li><a href="https://vicarie.in/posts/blogging-with-org.html">https://vicarie.in/posts/blogging-with-org.html</a></li>
<li><a href="https://writepermission.com/org-blogging-rss-feed.html">https://writepermission.com/org-blogging-rss-feed.html</a></li>
</ul>
</div>
</div>

  </div>

      </div>
    </div>

    <div class="footer">
      
        <div class="bg">
          <div class="container">
            &#169; Lincoln Clarete &mdash; All written content on this
            website reflects my personal opinion and it's available
            under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>
          </div>
        </div>
      
    </div>
  </body>
</html>
